webpackJsonp([8],{hikS:function(e,a){},iNR7:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("Xxa5"),r=t.n(s),n=t("exGp"),l=t.n(n),c=t("ZEg/"),i={data:function(){return{dealerList:[],options:[{label:"开启",value:"1"},{label:"禁用",value:"0"}],preDealerParams:{name:null,cname:null,cphone:null},dealerParams:{name:null,cname:null,cphone:null},searchParams:{name:null,adminuser:null},name:null,adminuser:null}},created:function(){this.getDealerList()},computed:{currentDealerList:function(){var e=this.searchParams,a=e.name,t=e.adminuser;return a||t?this.dealerList.filter(function(e){return e.name.toLowerCase().indexOf(a)>-1||e.adminuser.toLowerCase().indexOf(t)>-1}):this.dealerList}},methods:{setSearchParams:function(){this.$set(this.searchParams,"name",this.name),this.$set(this.searchParams,"adminuser",this.adminuser)},getDealerList:function(){var e=this;return l()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.getDealerList();case 2:"success"===(t=a.sent).flags?t.data&&(e.dealerList=t.data):e.$toast(t.message,"error");case 4:case"end":return a.stop()}},a,e)}))()},createDealer:function(){var e=this;return l()(r.a.mark(function a(){var t,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if((t=e.$_.cloneDeep(e.dealerParams)).name){a.next=3;break}return a.abrupt("return",e.$toast("请输入经销商名称"));case 3:if(t.cname){a.next=5;break}return a.abrupt("return",e.$toast("请输入联系人姓名"));case 5:if(t.cphone){a.next=7;break}return a.abrupt("return",e.$toast("请输入联系人电话"));case 7:return a.next=9,c.a.createDealer(t);case 9:"success"===(s=a.sent).flags?(e.$toast("创建成功","success"),e.dealerParams=e.$_.cloneDeep(e.preDealerParams),e.getDealerList()):e.$toast(s.message,"error");case 11:case"end":return a.stop()}},a,e)}))()},saveDealerByCompanyKey:function(e){var a=this;return l()(r.a.mark(function t(){var s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",a.$toast("经销商信息不存在"));case 2:return t.next=4,c.a.saveDealerByCompanyKey(e);case 4:"success"===(s=t.sent).flags?a.$toast("修改成功","success"):a.$toast(s.message,"error");case 6:case"end":return t.stop()}},t,a)}))()},resetDealerPasswordConfirm:function(e){var a=this;this.$confirm("密码重置后，该账号下次登录时需使用新密码，确定重置吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return a.resetDealerPassword(e)}).catch(function(){a.$toast("已取消重置密码","info")})},resetDealerPassword:function(e){var a=this;return l()(r.a.mark(function t(){var s,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",a.$toast("经销商信息不存在"));case 2:return t.next=4,c.a.resetDealerPassword({accountkey:e.adminkey});case 4:"success"===(s=t.sent).flags?(a.$toast("重置成功","success"),s.data&&(n=s.data.pass,a.$set(e,"pass",n))):a.$toast(s.message,"error");case 6:case"end":return t.stop()}},t,a)}))()},lengthCheckedHandle:function(e){if(e.length>12||e.length<10)return this.$toast("号码长度必须为10~12位！")}}},o={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"dealer-container"},[t("div",{staticClass:"dealer-header"},[t("div",{staticClass:"dealer-create"},[t("el-input",{staticStyle:{"margin-left":"0"},attrs:{size:"small",placeholder:"经销商名称",maxlength:"20"},model:{value:e.dealerParams.name,callback:function(a){e.$set(e.dealerParams,"name",a)},expression:"dealerParams.name"}}),e._v(" "),t("el-input",{attrs:{size:"small",placeholder:"经销商联系人",maxlength:"20"},model:{value:e.dealerParams.cname,callback:function(a){e.$set(e.dealerParams,"cname",a)},expression:"dealerParams.cname"}}),e._v(" "),t("el-input",{attrs:{size:"small",placeholder:"经销商联系电话",maxlength:"12",minlength:"10"},on:{change:e.lengthCheckedHandle},model:{value:e.dealerParams.cphone,callback:function(a){e.$set(e.dealerParams,"cphone",a)},expression:"dealerParams.cphone"}}),e._v(" "),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"small",round:""},on:{click:e.createDealer}},[e._v("创建经销商")])],1),e._v(" "),t("div",{staticClass:"dealer-search"},[t("el-input",{staticStyle:{"margin-left":"0"},attrs:{size:"small",placeholder:"经销商名称",maxlength:"20"},model:{value:e.name,callback:function(a){e.name=a},expression:"name"}}),e._v(" "),t("el-input",{attrs:{size:"small",placeholder:"经销商主账号",maxlength:"20"},model:{value:e.adminuser,callback:function(a){e.adminuser=a},expression:"adminuser"}}),e._v(" "),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"small",round:""},on:{click:e.setSearchParams}},[e._v("查询")])],1)]),e._v(" "),t("div",{staticClass:"dealer-content"},[t("el-row",{attrs:{gutter:12}},e._l(e.currentDealerList,function(a){return t("el-col",{key:a.companykey,attrs:{xs:12,sm:12,md:8,lg:6,xl:4}},[t("div",{staticClass:"dealer-list"},[t("el-input",{attrs:{size:"small","prefix-icon":"iconfont icon-A-jingxiaoshang",placeholder:"经销商名称"},model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"dealer.name"}}),e._v(" "),t("el-input",{attrs:{size:"small","prefix-icon":"iconfont icon-jingxiaoshang",placeholder:"经销商联系人"},model:{value:a.cname,callback:function(t){e.$set(a,"cname",t)},expression:"dealer.cname"}}),e._v(" "),t("el-input",{attrs:{size:"small","prefix-icon":"iconfont icon-shouji",placeholder:"经销商联系电话",maxlength:"12",minlength:"10"},on:{change:e.lengthCheckedHandle},model:{value:a.cphone,callback:function(t){e.$set(a,"cphone",t)},expression:"dealer.cphone"}}),e._v(" "),t("div",{staticClass:"clearfix",staticStyle:{"text-align":"right"}},[t("el-select",{staticStyle:{width:"80px",float:"left"},attrs:{size:"small"},model:{value:a.status,callback:function(t){e.$set(a,"status",t)},expression:"dealer.status"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),t("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:function(t){return e.saveDealerByCompanyKey(a)}}},[e._v("保存修改")])],1),e._v(" "),t("div",{staticClass:"clearfix dealer-user"},[t("span",[e._v("管理员账号:"+e._s(a.adminuser))]),t("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:function(t){return e.resetDealerPasswordConfirm(a)}}},[e._v("重置密码")])],1),e._v(" "),t("p",{staticClass:"dealer-pass"},[a.pass?[e._v("长按复制主账号新密码: "+e._s(a.pass))]:e._e()],2)],1)])}),1)],1)])},staticRenderFns:[]};var u=t("VU/8")(i,o,!1,function(e){t("hikS")},"data-v-7f2a7e83",null);a.default=u.exports}});
//# sourceMappingURL=8.3ad4025dc2e468c2955f.js.map