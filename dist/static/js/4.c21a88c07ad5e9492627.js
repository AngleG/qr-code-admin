webpackJsonp([4],{UGpC:function(e,t){},bbc4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),s=a.n(n),r=a("woOf"),o=a.n(r),i=a("exGp"),c=a.n(i),l=a("mJM1"),u=a("SgTw"),m=a("ZEg/"),p={data:function(){return{config:u.a,cityData:l.a,logoFile:null,logoCacheUrl:null,requestParams:{companykey:null,eaddr:null,econtact:null,elogo:null,email:null,ename:null,ephone:null,eweb:null,sendcity:null,sendcontact:null,sendcounty:null,sendphone:null,sendprovince:null,sendstreet:null},configObject:{cityList:[],countyList:[]},preCompanyInfo:null}},computed:{logoUrl:function(){return this.logoCacheUrl?this.logoCacheUrl:""+this.config.DOWNLOAD_URL+this.requestParams.elogo},isEdit:function(){return this.preCompanyInfo&&this.preCompanyInfo.ename}},created:function(){this.getCompanyInfo()},methods:{getCompanyInfo:function(){var e=this;return c()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.getCompanyInfo();case 2:"success"===(a=t.sent).flags?(a.data&&(e.preCompanyInfo=e.$_.cloneDeep(a.data),e.requestParams=o()({},e.requestParams,a.data)),e.init()):e.$toast(a.message,"error");case 4:case"end":return t.stop()}},t,e)}))()},upload:function(){var e=this;return c()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.logoFile){t.next=2;break}return t.abrupt("return",e.$toast("请浏览图片后上传"));case 2:return t.next=4,m.a.upload(e.logoFile,{companykey:e.requestParams.companykey},"/mccl");case 4:"success"===(a=t.sent).flags?(a.data&&(e.requestParams.elogo=a.data.picpath,e.$toast("上传图片成功","success")),e.init()):e.$toast(a.message,"error");case 6:case"end":return t.stop()}},t,e)}))()},editCompanyInfo:function(){var e=this;return c()(s.a.mark(function t(){var a,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(delete(a=e.$_.cloneDeep(e.requestParams)).companykey,delete a.elogo,!e.isEdit){t.next=9;break}return t.next=6,m.a.saveCompanyInfo(a);case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,m.a.createCompanyInfo(a);case 11:t.t0=t.sent;case 12:"success"===(n=t.t0).flags?(e.$toast(e.isEdit?"保存成功":"创建成功","success"),e.getCompanyInfo()):e.$toast(n.message,"error");case 14:case"end":return t.stop()}},t,e)}))()},init:function(){var e=this.requestParams.sendprovince,t=this.requestParams.sendcounty;e&&this.changeProvinceFn(),t&&this.changeCityFn()},changeProvinceFn:function(e){e&&(this.requestParams.sendcity=null,this.requestParams.sendcounty=null);var t=this.requestParams.sendprovince;this.configObject.cityList=t?this.cityData.find(function(e){return e.name===t}).children:[]},changeCityFn:function(e){e&&(this.requestParams.sendcounty=null);var t=this.requestParams.sendcity,a=this.configObject.cityList;this.configObject.countyList=t&&a.length?a.find(function(e){return e.name===t}).children:[]},getObjectURL:function(e){var t=null;return window.createObjectURL?t=window.createObjectURL(e):window.URL?t=window.URL.createObjectURL(e):window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t},getCacheFile:function(e){var t=e.target.files[0];this.logoCacheUrl=this.getObjectURL(t),this.logoFile=t,this.logoFile&&this.$toast("请点击“上传企业logo”按钮以完成上传","info")}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"company-layout"},[a("div",{staticClass:"company-wrap"},[a("div",{staticClass:"company-content"},[a("div",{staticClass:"company-upload"},[a("div",{staticClass:"file-box"},[e.requestParams.elogo||e.logoCacheUrl?a("img",{attrs:{width:"100%",height:"100%",src:e.logoUrl}}):e._e()]),e._v(" "),a("input",{staticStyle:{visibility:"hidden",width:"0",height:"0"},attrs:{type:"file",accept:"image/png,image/jpeg,image/gif",name:"file",id:"file_company"},on:{change:e.getCacheFile}}),e._v(" "),e._m(0),e._v(" "),a("el-button",{staticClass:"upload-btn",attrs:{type:"primary",size:"small",round:""},on:{click:e.upload}},[e._v("上传企业logo")])],1),e._v(" "),a("div",{staticClass:"company-form"},[a("el-input",{attrs:{size:"small",maxlength:"50","prefix-icon":"iconfont icon-qiye1",placeholder:"企业名称"},model:{value:e.requestParams.ename,callback:function(t){e.$set(e.requestParams,"ename",t)},expression:"requestParams.ename"}}),e._v(" "),a("el-input",{attrs:{size:"small",maxlength:"100","prefix-icon":"iconfont icon-dizhi",placeholder:"企业地址"},model:{value:e.requestParams.eaddr,callback:function(t){e.$set(e.requestParams,"eaddr",t)},expression:"requestParams.eaddr"}}),e._v(" "),a("el-input",{attrs:{size:"small",maxlength:"100","prefix-icon":"iconfont icon-yonghu",placeholder:"企业联系人姓名"},model:{value:e.requestParams.econtact,callback:function(t){e.$set(e.requestParams,"econtact",t)},expression:"requestParams.econtact"}}),e._v(" "),a("el-input",{attrs:{size:"small",maxlength:"20","prefix-icon":"iconfont icon-shouji",placeholder:"企业联系人电话"},model:{value:e.requestParams.ephone,callback:function(t){e.$set(e.requestParams,"ephone",t)},expression:"requestParams.ephone"}}),e._v(" "),a("el-input",{attrs:{size:"small",maxlength:"100","prefix-icon":"iconfont icon-youxiang",placeholder:"企业邮箱"},model:{value:e.requestParams.email,callback:function(t){e.$set(e.requestParams,"email",t)},expression:"requestParams.email"}}),e._v(" "),a("el-input",{attrs:{size:"small",maxlength:"100","prefix-icon":"iconfont icon-wangzhan",placeholder:"企业官网"},model:{value:e.requestParams.eweb,callback:function(t){e.$set(e.requestParams,"eweb",t)},expression:"requestParams.eweb"}}),e._v(" "),a("div",{staticClass:"company-address"},[a("div",{staticClass:"company-address-select"},[a("i",{staticClass:"iconfont icon-dizhi1"}),e._v("\n            发货省"),a("el-select",{attrs:{size:"samll"},on:{change:e.changeProvinceFn},model:{value:e.requestParams.sendprovince,callback:function(t){e.$set(e.requestParams,"sendprovince",t)},expression:"requestParams.sendprovince"}},e._l(e.cityData,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1),e._v("\n            发货市"),a("el-select",{attrs:{size:"samll"},on:{change:e.changeCityFn},model:{value:e.requestParams.sendcity,callback:function(t){e.$set(e.requestParams,"sendcity",t)},expression:"requestParams.sendcity"}},e._l(e.configObject.cityList,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1),e._v("\n            发货区县"),a("el-select",{attrs:{size:"samll"},model:{value:e.requestParams.sendcounty,callback:function(t){e.$set(e.requestParams,"sendcounty",t)},expression:"requestParams.sendcounty"}},e._l(e.configObject.countyList,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1)],1),e._v(" "),a("el-input",{attrs:{maxlength:"100",size:"small",placeholder:"发货详细街道地址"},model:{value:e.requestParams.sendstreet,callback:function(t){e.$set(e.requestParams,"sendstreet",t)},expression:"requestParams.sendstreet"}})],1),e._v(" "),a("el-input",{attrs:{maxlength:"50",size:"small","prefix-icon":"iconfont icon-yonghu",placeholder:"发货联系人姓名"},model:{value:e.requestParams.sendcontact,callback:function(t){e.$set(e.requestParams,"sendcontact",t)},expression:"requestParams.sendcontact"}}),e._v(" "),a("el-input",{attrs:{maxlength:"50",size:"small","prefix-icon":"iconfont icon-shouji",placeholder:"发货联系人电话"},model:{value:e.requestParams.sendphone,callback:function(t){e.$set(e.requestParams,"sendphone",t)},expression:"requestParams.sendphone"}})],1)]),e._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary",size:"small",round:""},on:{click:e.editCompanyInfo}},[e._v(e._s(e.isEdit?"保存修改":"创建"))])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:"file_company"}},[t("span",{staticStyle:{"font-size":"14px",color:"#409EFF",cursor:"pointer"}},[this._v("浏览..")])])}]};var f=a("VU/8")(p,d,!1,function(e){a("UGpC")},"data-v-fe3d2f62",null);t.default=f.exports}});
//# sourceMappingURL=4.c21a88c07ad5e9492627.js.map