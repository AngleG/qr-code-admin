{"version":3,"sources":["webpack:///src/views/pages/coupon/coupon-operating.vue","webpack:///./src/views/pages/coupon/coupon-operating.vue?4963","webpack:///./src/views/pages/coupon/coupon-operating.vue"],"names":["coupon_operating","data","_this","this","$createElement","configObject","COUPON_STATUS","config_list","couponList","dealerList","searchParams","couponkey","pagenum","requestParams","agentcompanykey","sharedData","serialfrom","num","tableColumns","title","width","align","key","render","h","params","$options","filters","formatConfigValueToLabel","row","action","tableData","isLoading","totalPages","created","_this2","promise_default","a","all","getDealerList","getCouponList","then","getCouponOperatingList","catch","err","console","log","methods","_this3","asyncToGenerator_default","regenerator_default","mark","_callee","res","wrap","_context","prev","next","api","sent","flags","length","map","item","assign_default","label","name","value","companykey","$toast","message","stop","_this4","_callee2","_context2","reverse","currentPage","_this5","_callee3","_context3","$_","cloneDeep","totalpages","list","setCouponStatus","status","_this6","_callee4","isCancel","statusStr","_params","_context4","abrupt","setCouponForCancel","t0","setCouponForActivation","setCouponStatusConfirm","enterCouponStatus","result","_this7","_callee5","_context5","_this8","$confirm","serialto","codestart","codelast","confirmButtonText","cancelButtonText","roundButton","type","coupon_coupon_operating","_vm","_h","_c","_self","staticClass","attrs","size","placeholder","on","change","model","callback","$$v","$set","expression","_l","_v","staticStyle","margin-left","inline","slot","label-width","round","click","$event","table-columns","table-data","element-loading-background","page-count","getList","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.03ab6cb968e2d5998b9a.js","sourcesContent":["<template>\r\n  <div class=\"coupon-operating\">\r\n    <div class=\"coupon-operating_search\">\r\n      <el-select\r\n        size=\"small\"\r\n        v-model=\"searchParams.couponkey\"\r\n        :value=\"searchParams.couponkey\"\r\n        placeholder=\"请选择礼劵\"\r\n      @change=\"getCouponOperatingList\">\r\n        <el-option\r\n          v-for=\"item in configObject.couponList\"\r\n          :label=\"item.label\"\r\n          :key=\"item.value\"\r\n          :value=\"item.value\"/>\r\n      </el-select>\r\n      <!--<el-button @click=\"getCouponOperatingList\" size=\"small\" type=\"primary\" round>查询</el-button>-->\r\n      <el-select\r\n        size=\"small\"\r\n        style=\"margin-left: 20px;\"\r\n        v-model=\"requestParams.agentcompanykey\"\r\n        :value=\"requestParams.agentcompanykey\"\r\n        placeholder=\"请选择经销商\">\r\n        <el-option\r\n          v-for=\"item in configObject.dealerList\"\r\n          :label=\"item.label\"\r\n          :key=\"item.value\"\r\n          :value=\"item.value\"/>\r\n      </el-select>\r\n      <base-item inline><template slot=\"label\">起始序列号:</template><el-input v-model=\"requestParams.sharedData.serialfrom\" size=\"small\"/></base-item>\r\n      <base-item label-width=\"45px\" inline><template slot=\"label\">张数:</template><el-input v-model=\"requestParams.sharedData.num\" size=\"small\"/> <el-button @click=\"setCouponStatus('activation')\" size=\"small\" type=\"primary\" round>激活</el-button><el-button @click=\"setCouponStatus('cancel')\" size=\"small\" type=\"primary\" round>撤销</el-button></base-item>\r\n    </div>\r\n    <div class=\"coupon-operating_content\">\r\n      <element-table :table-columns=\"tableColumns\" :table-data=\"tableData\" element-loading-background=\"rgba(0, 0, 0, 0.5)\"></element-table>\r\n      <customize-pagination @getList=\"getCouponOperatingList\" :page-count=\"totalPages\"/>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import webApi from '../../../lib/api'\r\n  import {COUPON_STATUS} from '../../../conf/config-list'\r\n  export default {\r\n    data() {\r\n      return {\r\n        configObject: {\r\n          COUPON_STATUS,\r\n          couponList: [],\r\n          dealerList: []\r\n        },\r\n        searchParams: {\r\n          couponkey: null,\r\n          pagenum: 0\r\n        },\r\n        requestParams: {\r\n          agentcompanykey: null,\r\n          sharedData: {\r\n            serialfrom: null,\r\n            num: null\r\n          }\r\n        },\r\n        tableColumns: [\r\n          {title: '时间', width: 160, align: 'center', key: 'time' },\r\n          {title: '起始编号', align: 'center', key: 'sfrom' },\r\n          {title: '终止编号', align: 'center', key: 'sto' },\r\n          {title: '经销商', align: 'center', key: 'agentcompanyname' },\r\n          {title: '事件', align: 'center', key: 'action', render: (h, params) => <span>{ this.$options.filters.formatConfigValueToLabel(params.row.action, this.configObject.COUPON_STATUS) }</span>},\r\n          {title: '成功张数', align: 'center', key: 'successnum' },\r\n          {title: '失败张数', align: 'center', key: 'failnum' }\r\n        ],\r\n        tableData: [],\r\n        isLoading: false,\r\n        totalPages: 0\r\n      }\r\n    },\r\n    created() {\r\n      Promise.all([this.getDealerList(), this.getCouponList()]).then( () => {\r\n        this.getCouponOperatingList();\r\n      }).catch( err => console.log(err));\r\n    },\r\n    methods: {\r\n      /**\r\n       * 获取经销商列表\r\n       */\r\n      async getDealerList(){\r\n        let res = await webApi.getDealerList();\r\n        if (res.flags === 'success') {\r\n          this.configObject.dealerList = [];\r\n          if (res.data && res.data.length) {\r\n            this.configObject.dealerList = res.data.map(item => Object.assign(item, {label: item.name, value: item.companykey}));\r\n            this.requestParams.agentcompanykey = this.configObject.dealerList[0].value || null;\r\n          }\r\n        }else {\r\n          this.$toast(res.message, 'error');\r\n        }\r\n      },\r\n      /**\r\n       * 获取礼券列表\r\n       */\r\n      async getCouponList(){\r\n        let res = await webApi.getCouponList({});\r\n        if(res.flags === 'success'){\r\n          this.configObject.couponList = [];\r\n          if(res.data && res.data.length){\r\n            this.configObject.couponList = res.data.reverse().map(item => ({label: item.name, value: item.couponkey}));\r\n            this.searchParams.couponkey = this.configObject.couponList[0].value || null;\r\n          }\r\n        }else {\r\n          this.$toast(res.message, 'error');\r\n        }\r\n      },\r\n      //获取经销商激活和撤销列表\r\n      async getCouponOperatingList(currentPage) {\r\n        this.isLoading = true;\r\n        let params = this.$_.cloneDeep(this.searchParams);\r\n        params.pagenum = typeof currentPage === 'number' ? currentPage : 0;\r\n        let res = await webApi.getCouponOperatingList(params);\r\n        if (res.flags === 'success') {\r\n          this.tableData = [];\r\n          this.totalPages = 0;\r\n          if (res.data) {\r\n            this.totalPages = res.data.totalpages;\r\n            this.tableData = res.data.list;\r\n          }\r\n        } else {\r\n          this.$toast(res.message, 'error');\r\n        }\r\n        this.isLoading = false;\r\n      },\r\n      //设置礼劵状态\r\n      async setCouponStatus(status) {\r\n        if (!status) {\r\n          return this.$toast('礼劵状态不能为空')\r\n        }\r\n        let isCancel = status === 'cancel';\r\n        let statusStr = isCancel ? '撤销' : '激活';\r\n        let params = this.$_.cloneDeep(this.requestParams.sharedData);\r\n        let {serialfrom, num} = params;\r\n\r\n        let agentcompanykey = this.requestParams.agentcompanykey;\r\n        let couponkey = this.searchParams.couponkey;\r\n\r\n        if (!couponkey) {\r\n          return this.$toast(`请选择礼劵后${statusStr}`)\r\n        }\r\n        params = Object.assign(params, {couponkey});\r\n\r\n        if (!agentcompanykey) {\r\n          return this.$toast(`请选择经销商后${statusStr}`)\r\n        }\r\n\r\n        if (serialfrom === null || serialfrom === '' || num === null || num === '') {\r\n          return this.$toast('起始序列号和张数不能为空')\r\n        }\r\n        params.serialfrom = serialfrom = serialfrom - 0;\r\n        params.num = num = num - 0;\r\n        if (typeof serialfrom !== 'number' || typeof num !== 'number') {\r\n          return this.$toast('起始序列号和张数必须为数字')\r\n        }\r\n        if (serialfrom < 1) {\r\n          return this.$toast(`${statusStr}起始序列号必须大于或等于1`)\r\n        }\r\n        if (num < 0 || num > 1000) {\r\n          return this.$toast(`${statusStr}张数必须大于0且小于或等于1000`)\r\n        }\r\n        let res = isCancel ? await webApi.setCouponForCancel(params) : await webApi.setCouponForActivation(params);\r\n        if (res.flags === 'success') {\r\n          this.setCouponStatusConfirm(res.data, params, isCancel);\r\n        } else {\r\n          this.$toast(res.message, 'error');\r\n        }\r\n      },\r\n      /**\r\n       * 确定激活api\r\n       * @param result\r\n       * @param params\r\n       * @param isCancel\r\n       * @returns {Promise<void>}\r\n       */\r\n      async enterCouponStatus(result, params, isCancel) {\r\n        let agentcompanykey = this.requestParams.agentcompanykey;\r\n        let requestParams = Object.assign({}, {couponkey: result.couponkey, action: result.action}, {serialfrom: params.serialfrom, num: params.num, agentcompanykey});\r\n        let res = await webApi.enterCouponStatus(requestParams);\r\n        if (res.flags === 'success') {\r\n          this.$toast(`${isCancel ? '撤销' : '激活'}成功`, 'success');\r\n          this.getCouponOperatingList(0);\r\n        } else {\r\n          this.$toast(res.message, 'error');\r\n        }\r\n      },\r\n      /**\r\n       * 确定弹窗\r\n       * @param result\r\n       * @param params\r\n       * @param isCancel\r\n       */\r\n      setCouponStatusConfirm(result, params, isCancel) {\r\n        this.$confirm(`请确认${result.serialfrom}到${result.serialto}范围内第一张支付码${result.codestart}的序列号为${result.serialfrom}，最后一张支付码${result.codelast}的序列号为${result.serialto}，是否确认${isCancel ? '撤销' : '激活'}?`, '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          roundButton: true,\r\n          type: 'warning'\r\n        }).then(() => this.enterCouponStatus(result, params, isCancel)).catch(() => {\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  /deep/ {\r\n    @include customFormItem(125px, 36px, #fff, #fff, false);\r\n    .custom-form-item{\r\n      vertical-align: middle;\r\n    }\r\n  }\r\n  .coupon-operating {\r\n    .coupon-operating_search {\r\n      min-height: 50px;\r\n      line-height: 36px;\r\n      padding: 7px 30px;\r\n      text-align: left;\r\n      overflow: hidden;\r\n      .el-select {\r\n        margin-right: 5px;\r\n      }\r\n      .el-input {\r\n        width: 80px;\r\n        margin-right: 5px;\r\n      }\r\n    }\r\n    .coupon-operating_content {\r\n      height: 100%;\r\n      padding: 20px 30px;\r\n      overflow-y: auto;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/pages/coupon/coupon-operating.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"coupon-operating\"},[_c('div',{staticClass:\"coupon-operating_search\"},[_c('el-select',{attrs:{\"size\":\"small\",\"value\":_vm.searchParams.couponkey,\"placeholder\":\"请选择礼劵\"},on:{\"change\":_vm.getCouponOperatingList},model:{value:(_vm.searchParams.couponkey),callback:function ($$v) {_vm.$set(_vm.searchParams, \"couponkey\", $$v)},expression:\"searchParams.couponkey\"}},_vm._l((_vm.configObject.couponList),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('el-select',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"size\":\"small\",\"value\":_vm.requestParams.agentcompanykey,\"placeholder\":\"请选择经销商\"},model:{value:(_vm.requestParams.agentcompanykey),callback:function ($$v) {_vm.$set(_vm.requestParams, \"agentcompanykey\", $$v)},expression:\"requestParams.agentcompanykey\"}},_vm._l((_vm.configObject.dealerList),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('base-item',{attrs:{\"inline\":\"\"}},[_c('template',{slot:\"label\"},[_vm._v(\"起始序列号:\")]),_c('el-input',{attrs:{\"size\":\"small\"},model:{value:(_vm.requestParams.sharedData.serialfrom),callback:function ($$v) {_vm.$set(_vm.requestParams.sharedData, \"serialfrom\", $$v)},expression:\"requestParams.sharedData.serialfrom\"}})],2),_vm._v(\" \"),_c('base-item',{attrs:{\"label-width\":\"45px\",\"inline\":\"\"}},[_c('template',{slot:\"label\"},[_vm._v(\"张数:\")]),_c('el-input',{attrs:{\"size\":\"small\"},model:{value:(_vm.requestParams.sharedData.num),callback:function ($$v) {_vm.$set(_vm.requestParams.sharedData, \"num\", $$v)},expression:\"requestParams.sharedData.num\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"round\":\"\"},on:{\"click\":function($event){return _vm.setCouponStatus('activation')}}},[_vm._v(\"激活\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"round\":\"\"},on:{\"click\":function($event){return _vm.setCouponStatus('cancel')}}},[_vm._v(\"撤销\")])],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"coupon-operating_content\"},[_c('element-table',{attrs:{\"table-columns\":_vm.tableColumns,\"table-data\":_vm.tableData,\"element-loading-background\":\"rgba(0, 0, 0, 0.5)\"}}),_vm._v(\" \"),_c('customize-pagination',{attrs:{\"page-count\":_vm.totalPages},on:{\"getList\":_vm.getCouponOperatingList}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f335cc76\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/pages/coupon/coupon-operating.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f335cc76\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!sass-resources-loader?{\\\"resources\\\":\\\"E:\\\\\\\\project\\\\\\\\qr_code_amdin\\\\\\\\src\\\\\\\\static\\\\\\\\scss\\\\\\\\index.scss\\\"}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./coupon-operating.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./coupon-operating.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./coupon-operating.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f335cc76\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./coupon-operating.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f335cc76\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/pages/coupon/coupon-operating.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}